{% extends "./base.njk" %}

{% block header %}
  {% include "partials/nav.njk" %}
{% endblock %}

{% block container %}
  <section class="flex-ns flex-wrap flex-nowrap-l items-start justify-around relative mw10 mt6-ns mh5">
    <article class="mw7 f7 lh-copy nested-img nested-links nested-code nested-headlines nested-copy-letter-spacing nested-measure-wide nested-list-spacing mh5-l basis-70-ns">

      {{ super() }}

    </article>
    {% set TOC = content | toc | replace("âˆž", "") | safe %}
    <div class="measure sticky top-2 basis-30-ns flex-grow-1-ns">
      <div class="relative search-wrap">
        <form id="search-form" type="POST" action="/api/search">
          <label for="search" class="clip">
            Search Pusher documentation
          </label>
          <input name="t" id="search" type="search" value="" placeholder="Search documentation" class="sans-serif black f7 input-reset br2 ba b--smoke hover-b--silver focus-b--starflower focus-bs-starflower pa3 lh-solid h3 w-100" data-filter="{{ product | lower }}" maxlength="200">
        </form>

        <div class="br2 mt2 ba b--smoke absolute left-0 right-0 dn bg-snow-light search-results-wrap">
          <ul class="bg-white list ma0 pa0 overflow-y-auto bb b--smoke br2 br--top" style="top: 100%; max-height: 60vh;" id="search-results"></ul>
          <footer class="f6 pv3 ph4 steel">Search powered by <a href="https://www.algolia.com/" class="link eggplant hover-dragonfruit underline">Algolia</a></footer>
        </div>
      </div>

      {% if not hideTOC and TOC != "" %}
        <div class="mt5 bg-snow-light ba b--smoke-light pa4 br2 nested-copy-seperator nested-code">
          <header class="mb4 lh-title bb b--smoke">
            <h2 class="f4 fw5 ma0">Contents</h2>
          </header>
          {{ TOC }}
        </div>
      {% endif %}
    </div>
  </section>

{% endblock %}
